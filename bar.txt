import plotly.express as px
import pandas as pd

# Example data to represent your original data structure
data = {
    'Category': ['High', 'Moderate', 'Low'],
    'Count': [70, 50, 30]  # Example counts for each category
}

# Create a DataFrame
category_counts = pd.DataFrame(data)

# Create a single stacked bar
fig = px.bar(
    category_counts,
    x=['All Categories'],  # Single bar
    y='Count',
    color='Category',
    color_discrete_map={"High": "#3E701A", "Moderate": "#EC7046", "Low": "#DB0011"},
    title='Confidence Levels in a Single Stacked Bar',
    labels={"Count": "Number of Items", "Category": "Confidence Levels"}
)

# Update layout for font size and appearance
fig.update_layout(
    xaxis_title="",
    yaxis_title="Number of Items",
    title_font=dict(size=18),  # Set title font size
    xaxis=dict(showticklabels=False, title_font=dict(size=18)),  # Hide tick labels, adjust x-axis font
    yaxis=dict(title_font=dict(size=18)),  # Set y-axis title font size
    plot_bgcolor='white',
    paper_bgcolor='white',
    title_x=0.5,  # Center the title
    font=dict(size=18),  # Set font size for all text
    annotations=[
        dict(
            x=0.5,
            y=1.1,
            xref="paper",
            yref="paper",
            showarrow=False,
            bgcolor='white',
            text=(
                "Category Conditions:<br>"
                "High: >= 70%<br>"
                "Moderate: 60% - 70%<br>"
                "Low: < 60%"
            ),
            font=dict(size=18),  # Set font size for annotations
            align="center",
        )
    ]
)

# Show the figure
fig.show()
